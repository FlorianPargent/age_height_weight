<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.7.32">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


    <title>Tertiary analyses (scale construction)</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      html { -webkit-text-size-adjust: 100%; }
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      /* CSS for citations */
      div.csl-bib-body { }
      div.csl-entry {
        clear: both;
        margin-bottom: 0em;
      }
      .hanging-indent div.csl-entry {
        margin-left:2em;
        text-indent:-2em;
      }
      div.csl-left-margin {
        min-width:2em;
        float:left;
      }
      div.csl-right-inline {
        margin-left:2em;
        padding-left:1em;
      }
      div.csl-indent {
        margin-left: 2em;
      }    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = "../index.html";
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="../site_libs/manuscript-notebook/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-cb14dbda5391634e2881ab467e788e7e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
     
      </head>

  <body class="quarto-notebook quarto-light">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link" href=""><i class="bi bi-caret-left"></i> Back to Article</a>
      <h6><i class="bi bi-journal-code"></i> 3. Tertiary analyses (scale construction)</h6>

            <a href="../analysis/tertiary_analyses.qmd" class="btn btn-primary quarto-download-embed" download="tertiary_analyses.qmd">Download Source</a>
          </div>

     <header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Tertiary analyses (scale construction)</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#load-packages" id="toc-load-packages" class="nav-link active" data-scroll-target="#load-packages">Load packages</a></li>
  <li><a href="#load-datasets" id="toc-load-datasets" class="nav-link" data-scroll-target="#load-datasets">Load datasets</a></li>
  <li><a href="#exploratory-factor-analysis" id="toc-exploratory-factor-analysis" class="nav-link" data-scroll-target="#exploratory-factor-analysis">Exploratory factor analysis</a>
  <ul class="collapse">
  <li><a href="#reliability-estimates-and-item-total-correlations" id="toc-reliability-estimates-and-item-total-correlations" class="nav-link" data-scroll-target="#reliability-estimates-and-item-total-correlations">Reliability estimates and item total correlations</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">      

       <div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>In this notebook, we reproduce the analyses of the scale construction dataset to select and reformulate the final item set used in the main study reported in the manuscript.</p>
<p>More details on the procedures that were used to construct the final item set used in the main study are reported in <span class="citation" data-cites="eichhornItem2019">Eichhorn (<a href="#ref-eichhornItem2019" role="doc-biblioref">2019</a>)</span>, the German dissertation of the first author of the current manuscript.</p>
</div>
</div>
</div>
<section id="load-packages" class="level2">
<h2 class="anchored" data-anchor-id="load-packages">Load packages</h2>
<div class="cell-container"><div class="cell-decorator"><pre>In [1]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.1.0     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'psych'

The following objects are masked from 'package:ggplot2':

    %+%, alpha</code></pre>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [2]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># record R packages</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>papaja<span class="sc">::</span><span class="fu">r_refs</span>(<span class="at">file =</span> <span class="st">"../r-references.bib"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="load-datasets" class="level2">
<h2 class="anchored" data-anchor-id="load-datasets">Load datasets</h2>
<div class="cell-container"><div class="cell-decorator"><pre>In [3]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>dat_pilot <span class="ot">&lt;-</span> <span class="fu">read.spss</span>(<span class="st">"../data/Pilottest_Studie_3.sav"</span>, </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">to.data.frame =</span> <span class="cn">TRUE</span>, <span class="at">use.value.labels =</span> <span class="cn">FALSE</span>, <span class="at">na.omit =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
</section>
<section id="exploratory-factor-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-factor-analysis">Exploratory factor analysis</h2>
<div class="cell-container"><div class="cell-decorator"><pre>In [4]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">fa</span>(dat_pilot <span class="sc">|&gt;</span> <span class="fu">select</span>(KGr_22<span class="sc">:</span>KGr_40), </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">nfactors =</span> <span class="dv">3</span>, <span class="at">rotate =</span> <span class="st">"Promax"</span>, <span class="at">fm =</span> <span class="st">"ml"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(fit, <span class="at">sort =</span> <span class="cn">TRUE</span>, <span class="at">cut =</span> <span class="fl">0.15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Factor Analysis using method =  ml
Call: fa(r = select(dat_pilot, KGr_22:KGr_40), nfactors = 3, rotate = "Promax", 
    fm = "ml")
Standardized loadings (pattern matrix) based upon correlation matrix
       item   ML2   ML1   ML3     h2   u2 com
KGr_26   22  0.84 -0.16       0.6718 0.33 1.1
KGr_42   37  0.84             0.6876 0.31 1.0
KGr_38   60 -0.80             0.6345 0.37 1.0
KGr_24   10  0.79             0.6111 0.39 1.0
KGr_41   52 -0.78             0.6136 0.39 1.0
KGr_28   49  0.77             0.5928 0.41 1.0
KGr_40   61 -0.76             0.5794 0.42 1.0
KGr_43   55 -0.76             0.5682 0.43 1.0
KGr_37   40 -0.74             0.5503 0.45 1.1
KGr_32   31  0.72             0.5633 0.44 1.0
KGr_39   46 -0.71             0.4970 0.50 1.0
KGr_31   19  0.67             0.4489 0.55 1.0
KGr_33   28  0.64             0.4063 0.59 1.0
KGr_34   34  0.64             0.4639 0.54 1.1
KGr_35   43 -0.63             0.4327 0.57 1.1
KGr_25    7  0.62             0.3928 0.61 1.1
KGr_36   58 -0.59             0.3423 0.66 1.1
KGr_27   13  0.54             0.3018 0.70 1.0
KGr_23    4  0.50             0.2494 0.75 1.1
KGr_22    1  0.50             0.2481 0.75 1.0
KGr_30   16  0.42             0.1905 0.81 1.2
KGr_29   25  0.32        0.23 0.1385 0.86 2.0
KGe_50   44        0.94       0.8465 0.15 1.0
KGe_49   29        0.93       0.8143 0.19 1.0
KGe_56   20       -0.89       0.7049 0.30 1.1
KGe_51   17        0.86       0.7016 0.30 1.0
KGe_48    5        0.78       0.5958 0.40 1.0
KGe_52   14       -0.72       0.4977 0.50 1.0
KGe_59   50        0.72       0.5543 0.45 1.0
KGe_57    8       -0.70  0.21 0.4159 0.58 1.2
KGe_53   47       -0.68       0.4623 0.54 1.1
KGe_58   32       -0.66       0.4514 0.55 1.1
KGe_61   35        0.66       0.4632 0.54 1.1
KGe_54   26 -0.24 -0.45       0.2839 0.72 1.6
KGe_46   23        0.43       0.2195 0.78 1.1
KGe_45   41  0.23  0.39       0.2518 0.75 1.6
KGe_47   38        0.39       0.1668 0.83 1.0
KGe_60   53        0.21  0.18 0.1047 0.90 2.1
KGe_55   11       -0.17 -0.16 0.0739 0.93 2.2
A_6      27       -0.16  0.90 0.7381 0.26 1.1
A_2      51              0.87 0.7051 0.29 1.0
A_16     24              0.83 0.6235 0.38 1.1
A_5      57              0.74 0.5753 0.42 1.0
A_17     39              0.59 0.3936 0.61 1.1
A_9      15              0.52 0.2657 0.73 1.0
A_10     36              0.42 0.2072 0.79 1.1
A_15     12              0.41 0.1882 0.81 1.1
A_14      9             -0.37 0.1947 0.81 1.5
A_8       6              0.35 0.1264 0.87 1.0
A_13     30             -0.33 0.1131 0.89 1.4
A_12     21              0.32 0.1258 0.87 1.1
A_1      18              0.31 0.1424 0.86 1.4
KGe_44    2        0.17  0.26 0.1237 0.88 1.7
A_19     59              0.26 0.0628 0.94 1.0
A_11     56              0.24 0.0600 0.94 1.2
A_18     45              0.24 0.0836 0.92 1.4
A_3       3              0.22 0.0880 0.91 1.7
A_7      42              0.20 0.0561 0.94 1.2
A_4      33              0.15 0.0318 0.97 1.4
A_21     54                   0.0168 0.98 1.2
A_20     48                   0.0059 0.99 1.8

                        ML2  ML1  ML3
SS loadings           10.26 7.59 4.87
Proportion Var         0.17 0.12 0.08
Cumulative Var         0.17 0.29 0.37
Proportion Explained   0.45 0.33 0.21
Cumulative Proportion  0.45 0.79 1.00

 With factor correlations of 
     ML2  ML1  ML3
ML2 1.00 0.20 0.02
ML1 0.20 1.00 0.35
ML3 0.02 0.35 1.00

Mean item complexity =  1.2
Test of the hypothesis that 3 factors are sufficient.

df null model =  1830  with the objective function =  39.41 with Chi Square =  14497.86
df of  the model are 1650  and the objective function was  14.6 

The root mean square of the residuals (RMSR) is  0.07 
The df corrected root mean square of the residuals is  0.07 

The harmonic n.obs is  390 with the empirical chi square  6713.66  with prob &lt;  0 
The total n.obs was  390  with Likelihood Chi Square =  5340.85  with prob &lt;  0 

Tucker Lewis Index of factoring reliability =  0.675
RMSEA index =  0.076  and the 90 % confidence intervals are  0.074 0.078
BIC =  -4503.3
Fit based upon off diagonal values = 0.92
Measures of factor score adequacy             
                                                   ML2  ML1  ML3
Correlation of (regression) scores with factors   0.98 0.98 0.96
Multiple R square of scores with factors          0.96 0.96 0.92
Minimum correlation of possible factor scores     0.92 0.92 0.84</code></pre>
</div>
</div></div>
<section id="reliability-estimates-and-item-total-correlations" class="level3">
<h3 class="anchored" data-anchor-id="reliability-estimates-and-item-total-correlations">Reliability estimates and item total correlations</h3>
<div class="cell-container"><div class="cell-decorator"><pre>In [5]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>neg_items <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A_13"</span>, <span class="st">"A_14"</span>, <span class="st">"A_21"</span>,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"KGr_35"</span>, <span class="st">"KGr_36"</span>, <span class="st">"KGr_37"</span>, <span class="st">"KGr_38"</span>, <span class="st">"KGr_39"</span>, <span class="st">"KGr_40"</span>, <span class="st">"KGr_41"</span>, <span class="st">"KGr_43"</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"KGe_52"</span>, <span class="st">"KGe_53"</span>, <span class="st">"KGe_54"</span>, <span class="st">"KGe_55"</span>, <span class="st">"KGe_56"</span>, <span class="st">"KGe_57"</span>, <span class="st">"KGe_58"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>dat_pilot_recode <span class="ot">&lt;-</span> dat_pilot <span class="sc">|&gt;</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(KGr_22<span class="sc">:</span>KGr_40) <span class="sc">|&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(neg_items), <span class="sc">~</span> <span class="dv">7</span> <span class="sc">-</span> .))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [6]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>rel_age <span class="ot">&lt;-</span> psych<span class="sc">::</span><span class="fu">alpha</span>(dat_pilot_recode <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"A"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in psych::alpha(select(dat_pilot_recode, starts_with("A"))): Some items were negatively correlated with the first principal component and probably 
should be reversed.  
To do this, run the function again with the 'check.keys=TRUE' option</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Some items ( A_20 A_21 ) were negatively correlated with the first principal component and 
probably should be reversed.  
To do this, run the function again with the 'check.keys=TRUE' option</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>rel_height <span class="ot">&lt;-</span> psych<span class="sc">::</span><span class="fu">alpha</span>(dat_pilot_recode <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"KGr"</span>)))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>rel_weight <span class="ot">&lt;-</span> psych<span class="sc">::</span><span class="fu">alpha</span>(dat_pilot_recode <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"KGe"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div>
<p>The part-whole corrected item total correlations are displayed in column <code>r.drop</code></p>
<div class="cell-container"><div class="cell-decorator"><pre>In [7]:</pre></div><div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>rel_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Reliability analysis   
Call: psych::alpha(x = select(dat_pilot_recode, starts_with("A")))

  raw_alpha std.alpha G6(smc) average_r S/N   ase mean   sd median_r
      0.81      0.81    0.87      0.17 4.4 0.014    3 0.67     0.18

    95% confidence boundaries 
         lower alpha upper
Feldt     0.78  0.81  0.84
Duhachek  0.78  0.81  0.84

 Reliability if an item is dropped:
     raw_alpha std.alpha G6(smc) average_r S/N alpha se var.r med.r
A_3       0.80      0.81    0.86      0.17 4.2    0.014 0.034  0.18
A_8       0.80      0.81    0.86      0.18 4.3    0.014 0.035  0.18
A_14      0.79      0.80    0.86      0.17 4.0    0.015 0.033  0.17
A_15      0.79      0.80    0.86      0.17 4.1    0.015 0.035  0.17
A_9       0.79      0.80    0.85      0.16 3.9    0.015 0.032  0.17
A_1       0.80      0.81    0.86      0.18 4.2    0.014 0.035  0.18
A_12      0.79      0.80    0.86      0.17 4.1    0.015 0.033  0.18
A_16      0.79      0.80    0.85      0.17 4.0    0.015 0.031  0.17
A_6       0.79      0.79    0.85      0.16 3.9    0.015 0.030  0.17
A_13      0.80      0.81    0.86      0.18 4.3    0.014 0.035  0.18
A_4       0.80      0.81    0.86      0.18 4.3    0.014 0.034  0.19
A_10      0.80      0.80    0.86      0.17 4.1    0.014 0.034  0.18
A_17      0.79      0.80    0.85      0.17 4.0    0.015 0.033  0.17
A_7       0.81      0.82    0.87      0.19 4.6    0.013 0.033  0.19
A_18      0.81      0.81    0.86      0.18 4.3    0.014 0.035  0.18
A_20      0.83      0.83    0.88      0.20 4.9    0.013 0.030  0.19
A_2       0.79      0.79    0.85      0.16 3.8    0.015 0.030  0.17
A_21      0.82      0.83    0.87      0.19 4.8    0.013 0.030  0.19
A_11      0.81      0.81    0.86      0.18 4.3    0.014 0.035  0.19
A_5       0.79      0.79    0.85      0.16 3.9    0.015 0.031  0.17
A_19      0.81      0.81    0.87      0.18 4.3    0.014 0.036  0.18

 Item statistics 
       n  raw.r  std.r   r.cor r.drop mean  sd
A_3  390 0.4652 0.4663  0.4396  0.391  3.7 1.3
A_8  390 0.4118 0.4155  0.3600  0.324  3.1 1.4
A_14 390 0.5607 0.5624  0.5482  0.485  3.3 1.4
A_15 390 0.5630 0.5494  0.5140  0.476  3.4 1.6
A_9  390 0.6469 0.6530  0.6520  0.586  2.3 1.4
A_1  390 0.4306 0.4288  0.3774  0.337  2.5 1.5
A_12 390 0.5798 0.5584  0.5436  0.478  3.1 1.9
A_16 390 0.6125 0.6121  0.6276  0.534  3.0 1.6
A_6  390 0.6898 0.6926  0.7196  0.628  3.0 1.5
A_13 390 0.3972 0.3867  0.3306  0.299  3.9 1.5
A_4  390 0.3953 0.3877  0.3529  0.307  3.4 1.4
A_10 390 0.5011 0.5222  0.4972  0.427  2.1 1.3
A_17 390 0.6031 0.6118  0.5959  0.534  2.2 1.4
A_7  390 0.2125 0.2188  0.1505  0.110  3.1 1.5
A_18 390 0.3855 0.3883  0.3349  0.292  3.6 1.5
A_20 390 0.0034 0.0024 -0.0930 -0.106  2.6 1.5
A_2  390 0.7105 0.7156  0.7312  0.656  2.5 1.4
A_21 390 0.0955 0.0809  0.0075 -0.019  3.8 1.6
A_11 390 0.3553 0.3815  0.3368  0.283  1.9 1.1
A_5  390 0.6754 0.6849  0.6856  0.622  2.3 1.3
A_19 390 0.3796 0.3666  0.3082  0.275  3.4 1.6

Non missing response frequency for each item
        1    2    3    4    5    6 miss
A_3  0.03 0.15 0.25 0.29 0.20 0.08    0
A_8  0.13 0.25 0.23 0.21 0.12 0.06    0
A_14 0.11 0.23 0.22 0.22 0.15 0.07    0
A_15 0.16 0.19 0.15 0.19 0.20 0.12    0
A_9  0.34 0.32 0.16 0.11 0.04 0.04    0
A_1  0.35 0.28 0.09 0.16 0.07 0.05    0
A_12 0.32 0.15 0.12 0.11 0.11 0.19    0
A_16 0.25 0.19 0.13 0.25 0.11 0.07    0
A_6  0.23 0.21 0.14 0.28 0.10 0.04    0
A_13 0.08 0.14 0.16 0.20 0.25 0.16    0
A_4  0.09 0.22 0.22 0.25 0.15 0.07    0
A_10 0.43 0.30 0.08 0.13 0.05 0.02    0
A_17 0.43 0.25 0.12 0.12 0.06 0.03    0
A_7  0.16 0.22 0.16 0.26 0.13 0.05    0
A_18 0.07 0.19 0.19 0.26 0.14 0.13    0
A_20 0.32 0.26 0.14 0.15 0.07 0.07    0
A_2  0.32 0.25 0.15 0.20 0.06 0.02    0
A_21 0.11 0.13 0.16 0.21 0.20 0.19    0
A_11 0.48 0.33 0.08 0.06 0.02 0.02    0
A_5  0.36 0.24 0.17 0.19 0.03 0.01    0
A_19 0.18 0.16 0.17 0.23 0.15 0.11    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>rel_height</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Reliability analysis   
Call: psych::alpha(x = select(dat_pilot_recode, starts_with("KGr")))

  raw_alpha std.alpha G6(smc) average_r S/N    ase mean  sd median_r
      0.94      0.94    0.96      0.44  17 0.0038  2.9 1.1     0.44

    95% confidence boundaries 
         lower alpha upper
Feldt     0.94  0.94  0.95
Duhachek  0.94  0.94  0.95

 Reliability if an item is dropped:
       raw_alpha std.alpha G6(smc) average_r S/N alpha se var.r med.r
KGr_22      0.94      0.94    0.96      0.44  17   0.0039 0.022  0.45
KGr_23      0.94      0.94    0.96      0.44  17   0.0039 0.022  0.45
KGr_25      0.94      0.94    0.95      0.44  16   0.0040 0.022  0.44
KGr_24      0.94      0.94    0.95      0.43  16   0.0041 0.022  0.41
KGr_27      0.94      0.94    0.96      0.44  17   0.0039 0.022  0.45
KGr_30      0.95      0.95    0.96      0.45  17   0.0038 0.021  0.45
KGr_31      0.94      0.94    0.95      0.43  16   0.0040 0.022  0.44
KGr_26      0.94      0.94    0.95      0.43  16   0.0042 0.021  0.43
KGr_29      0.95      0.95    0.96      0.46  18   0.0037 0.018  0.45
KGr_33      0.94      0.94    0.96      0.44  16   0.0040 0.023  0.45
KGr_32      0.94      0.94    0.95      0.43  16   0.0041 0.022  0.42
KGr_34      0.94      0.94    0.95      0.43  16   0.0040 0.023  0.44
KGr_42      0.94      0.94    0.95      0.42  15   0.0042 0.021  0.42
KGr_37      0.94      0.94    0.95      0.43  16   0.0041 0.022  0.44
KGr_35      0.94      0.94    0.96      0.44  16   0.0040 0.023  0.43
KGr_39      0.94      0.94    0.95      0.43  16   0.0041 0.021  0.43
KGr_28      0.94      0.94    0.95      0.43  16   0.0041 0.022  0.42
KGr_41      0.94      0.94    0.95      0.43  16   0.0042 0.021  0.43
KGr_43      0.94      0.94    0.95      0.43  16   0.0041 0.021  0.43
KGr_36      0.94      0.94    0.96      0.44  17   0.0039 0.022  0.45
KGr_38      0.94      0.94    0.95      0.43  16   0.0042 0.020  0.43
KGr_40      0.94      0.94    0.95      0.43  16   0.0041 0.021  0.43

 Item statistics 
         n raw.r std.r r.cor r.drop mean  sd
KGr_22 390  0.53  0.56  0.54   0.50  1.6 1.2
KGr_23 390  0.54  0.56  0.53   0.50  2.0 1.3
KGr_25 390  0.65  0.68  0.66   0.62  1.7 1.2
KGr_24 390  0.79  0.80  0.80   0.76  2.2 1.5
KGr_27 390  0.57  0.59  0.56   0.53  1.8 1.4
KGr_30 390  0.44  0.46  0.42   0.40  1.7 1.2
KGr_31 390  0.69  0.71  0.69   0.66  1.7 1.3
KGr_26 390  0.81  0.79  0.79   0.77  3.7 1.9
KGr_29 390  0.37  0.38  0.34   0.32  2.4 1.5
KGr_33 390  0.67  0.68  0.66   0.63  2.1 1.6
KGr_32 390  0.75  0.75  0.74   0.72  2.5 1.7
KGr_34 390  0.69  0.68  0.67   0.65  3.4 1.7
KGr_42 390  0.83  0.84  0.85   0.81  2.2 1.5
KGr_37 390  0.73  0.72  0.71   0.69  3.8 1.9
KGr_35 390  0.67  0.65  0.63   0.62  3.9 1.7
KGr_39 390  0.71  0.69  0.68   0.68  4.2 1.6
KGr_28 390  0.77  0.78  0.77   0.74  2.4 1.6
KGr_41 390  0.79  0.77  0.77   0.76  4.2 1.8
KGr_43 390  0.75  0.73  0.73   0.72  4.2 1.6
KGr_36 390  0.60  0.58  0.56   0.55  4.7 1.8
KGr_38 390  0.79  0.77  0.77   0.76  4.3 1.8
KGr_40 390  0.77  0.75  0.74   0.73  3.6 1.9

Non missing response frequency for each item
          1    2    3    4    5    6 miss
KGr_22 0.70 0.15 0.05 0.05 0.03 0.02    0
KGr_23 0.50 0.24 0.11 0.09 0.05 0.02    0
KGr_25 0.65 0.18 0.06 0.06 0.05 0.01    0
KGr_24 0.48 0.19 0.11 0.11 0.06 0.05    0
KGr_27 0.66 0.13 0.08 0.06 0.05 0.03    0
KGr_30 0.69 0.14 0.07 0.04 0.04 0.02    0
KGr_31 0.71 0.11 0.06 0.06 0.03 0.03    0
KGr_26 0.20 0.14 0.09 0.10 0.25 0.22    0
KGr_29 0.42 0.20 0.10 0.18 0.08 0.02    0
KGr_33 0.61 0.13 0.04 0.08 0.08 0.06    0
KGr_32 0.42 0.19 0.08 0.11 0.12 0.08    0
KGr_34 0.20 0.16 0.19 0.16 0.15 0.15    0
KGr_42 0.50 0.17 0.10 0.12 0.08 0.03    0
KGr_37 0.20 0.13 0.12 0.08 0.21 0.27    0
KGr_35 0.13 0.13 0.14 0.18 0.19 0.24    0
KGr_39 0.06 0.11 0.17 0.13 0.26 0.26    0
KGr_28 0.48 0.15 0.12 0.08 0.11 0.06    0
KGr_41 0.12 0.12 0.10 0.13 0.17 0.36    0
KGr_43 0.07 0.13 0.15 0.14 0.23 0.28    0
KGr_36 0.08 0.10 0.07 0.07 0.13 0.55    0
KGr_38 0.12 0.12 0.08 0.07 0.24 0.36    0
KGr_40 0.21 0.15 0.13 0.12 0.13 0.26    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>rel_weight</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Reliability analysis   
Call: psych::alpha(x = select(dat_pilot_recode, starts_with("KGe")))

  raw_alpha std.alpha G6(smc) average_r S/N    ase mean   sd median_r
      0.91      0.91    0.94      0.37  10 0.0061  2.8 0.99     0.36

    95% confidence boundaries 
         lower alpha upper
Feldt      0.9  0.91  0.93
Duhachek   0.9  0.91  0.93

 Reliability if an item is dropped:
       raw_alpha std.alpha G6(smc) average_r  S/N alpha se var.r med.r
KGe_44      0.92      0.92    0.94      0.39 10.9   0.0060 0.038  0.37
KGe_48      0.90      0.90    0.93      0.36  9.4   0.0067 0.039  0.32
KGe_57      0.91      0.91    0.94      0.37 10.0   0.0064 0.039  0.35
KGe_55      0.92      0.92    0.94      0.39 10.9   0.0058 0.035  0.37
KGe_52      0.91      0.91    0.93      0.36  9.6   0.0067 0.038  0.35
KGe_51      0.90      0.90    0.93      0.36  9.4   0.0069 0.037  0.35
KGe_56      0.90      0.90    0.93      0.35  9.3   0.0069 0.036  0.34
KGe_46      0.91      0.91    0.94      0.38 10.3   0.0063 0.041  0.37
KGe_54      0.91      0.91    0.94      0.38 10.3   0.0062 0.040  0.37
KGe_49      0.90      0.90    0.93      0.35  9.2   0.0070 0.036  0.32
KGe_58      0.91      0.91    0.94      0.36  9.7   0.0065 0.040  0.32
KGe_61      0.91      0.91    0.94      0.37  9.8   0.0065 0.040  0.35
KGe_47      0.91      0.91    0.94      0.38 10.4   0.0061 0.041  0.37
KGe_45      0.91      0.91    0.94      0.38 10.3   0.0062 0.040  0.37
KGe_50      0.90      0.90    0.93      0.35  9.1   0.0071 0.035  0.32
KGe_53      0.91      0.91    0.94      0.36  9.7   0.0066 0.040  0.33
KGe_59      0.91      0.90    0.93      0.36  9.4   0.0066 0.039  0.32
KGe_60      0.92      0.91    0.93      0.39 10.7   0.0058 0.037  0.37

 Item statistics 
         n raw.r std.r r.cor r.drop mean   sd
KGe_44 390  0.37  0.38  0.32   0.30  2.7 1.41
KGe_48 390  0.78  0.79  0.78   0.75  2.2 1.47
KGe_57 390  0.62  0.61  0.59   0.56  4.4 1.60
KGe_55 390  0.37  0.37  0.35   0.29  3.0 1.59
KGe_52 390  0.73  0.72  0.71   0.68  3.8 1.72
KGe_51 390  0.80  0.79  0.79   0.76  3.3 1.86
KGe_56 390  0.82  0.81  0.81   0.79  3.3 1.72
KGe_46 390  0.49  0.53  0.48   0.45  1.3 0.84
KGe_54 390  0.50  0.51  0.48   0.44  3.5 1.49
KGe_49 390  0.85  0.84  0.85   0.82  2.4 1.65
KGe_58 390  0.69  0.70  0.68   0.64  2.6 1.52
KGe_61 390  0.67  0.65  0.63   0.61  3.2 1.71
KGe_47 390  0.48  0.48  0.43   0.40  2.7 1.68
KGe_45 390  0.50  0.52  0.48   0.43  2.0 1.39
KGe_50 390  0.87  0.86  0.87   0.84  2.7 1.72
KGe_53 390  0.70  0.70  0.67   0.65  3.1 1.54
KGe_59 390  0.75  0.76  0.76   0.71  1.9 1.24
KGe_60 390  0.42  0.41  0.40   0.34  2.8 1.67

Non missing response frequency for each item
          1    2    3    4    5    6 miss
KGe_44 0.22 0.30 0.18 0.17 0.09 0.04    0
KGe_48 0.45 0.21 0.14 0.10 0.06 0.04    0
KGe_57 0.07 0.09 0.12 0.18 0.17 0.37    0
KGe_55 0.22 0.23 0.17 0.18 0.11 0.09    0
KGe_52 0.13 0.14 0.17 0.20 0.12 0.24    0
KGe_51 0.29 0.11 0.11 0.17 0.15 0.17    0
KGe_56 0.20 0.18 0.14 0.19 0.13 0.15    0
KGe_46 0.82 0.11 0.03 0.03 0.01 0.01    0
KGe_54 0.11 0.18 0.19 0.26 0.15 0.11    0
KGe_49 0.47 0.17 0.11 0.10 0.08 0.07    0
KGe_58 0.30 0.25 0.14 0.17 0.08 0.05    0
KGe_61 0.24 0.15 0.13 0.23 0.13 0.13    0
KGe_47 0.35 0.21 0.12 0.14 0.09 0.09    0
KGe_45 0.55 0.19 0.09 0.07 0.06 0.03    0
KGe_50 0.37 0.18 0.12 0.14 0.10 0.09    0
KGe_53 0.18 0.22 0.20 0.19 0.12 0.09    0
KGe_59 0.52 0.26 0.11 0.06 0.02 0.03    0
KGe_60 0.32 0.22 0.15 0.11 0.12 0.08    0</code></pre>
</div>
</div></div>
</section>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-eichhornItem2019" class="csl-entry" role="listitem">
Eichhorn, K. (2019). <em>Item und skala: Empirische untersuchungen zur g<span>ü</span>ltigkeit psychologischer messungen anhand physikalischer merkmale</em> [Ludwig-Maximilians-Universit<span>ä</span>t M<span>ü</span>nchen]. <a href="http://nbn-resolving.de/urn:nbn:de:bvb:19-236286">http://nbn-resolving.de/urn:nbn:de:bvb:19-236286</a>
</div>
</div>
</section>
     </main>
<!-- /main column -->  <script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>  </div> <!-- /content --> 
  
</body></html>